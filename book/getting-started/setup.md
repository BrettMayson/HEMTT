# Project Setup

This guide will cover a standard project setup that is recommended for HEMTT, and best practice for Arma 3 modding.

It will make use of [CBA](https://github.com/CBATeam/CBA_A3). CBA provides a lot of useful macros that simplify the process of creating mods, and promotes best practices.

## Create a Project

First, we need to create a project. We will use the `new` command to do this.

```bash
hemtt new tutorial
```

Follow the prompts to create a new project.

```bash
$> hemtt new tutorial
Example: Advanced Banana Environment
Project Name: Tutorial
Example: ABE Team
Author: Me
Example: abe
Prefix: tut
Main Prefix: z
Include CBA: Yes
```

When it comes to selecting a licenese, you can select any of the options below. If you are unsure, select `None`, and you can add one yourself later.

The APL-SA license is recommended for most mods, it allows others to use and modify your mod for non-commerical use, but only within the realm of Arma 3, and requires them to share their changes under the same license. You can read more about it [here](https://www.bohemia.net/community/licenses/arma-public-license-share-alike).

```bash
Select a license:
> Arma Public License Share Alike (APL-SA)
  Arma Public License (APL)
  Arma Public License No Derivatives (APL-ND)
  Apache 2.0
  GNU GPL v3
  MIT
  Unlicense
  None
```

## Project Structure

You will now see a new folder called `tutorial` in your current directory. This is the root of your project. It contains all of the files and folders that make up your mod.

Here is a list of the files and folders that are created by default.

```bash
ðŸ—€ tutorial
â”œâ”€â”€ ðŸ—€ .hemtt
â”‚   â”” ðŸ—Ž project.toml
â”œâ”€â”€ ðŸ—€ addons
â”œâ”€â”€ ðŸ—€ include
â”‚   â”” ðŸ—€ x
â”‚    â”” ðŸ—€ cba
â”‚       â”” ðŸ—€ addons
â”‚          â”” ðŸ—€ main
â”‚             â”” ðŸ—Ž script_macros_common.hpp
â””â”€â”€ ðŸ—Ž .gitignore
```

### .hemtt

This folder contains all of the configuration files for HEMTT. Right now it only contains one file, `project.toml`.

It will have all of the information you entered when you created the project.

**.hemtt/project.toml**

```toml
name = "Tutorial"
author = "Me"
prefix = "tut"
mainprefix = "z"
```

### addons

This folder contains all of the addons that make up your mod.

Addons are used to logically group files together. For example, you might have an addon called `common` that contains all of the common functions that are used by multiple addons. You might have an addon called `vehicles` that contains all of the vehicle definitions. You might have an addon called `weapons` that contains all of the weapon definitions.

### .gitignore

This file is used by Git to ignore files that you don't want to commit to your repository. It is automatically generated by HEMTT, and contains all of the files that are generated by HEMTT or should not be committed to your repository.

**.gitignore**

```gitignore
*.pbo
.hemttout
hemtt
hemtt.exe
*.biprivatekey
```

### include

The include folder is used to store files that come from other projects. For example, since we are using CBA, we will store the CBA macros in this folder.

## Main Addon

Every mod must have at least one addon. This addon is typically called the main addon, and is the entry point for your mod. It should define the dependencies of your mod, version, and global macros. It is also common to see some short config entries in the main addon, such as `CfgFactionClasses`, that don't require many lines of code.

Start by creating a new folder in the `addons` folder called `main`.

### $PBOPREFIX$

First, we will create a `$PBOPREFIX$` file. This file is used to denote where in Arma's virtual structure the addon should be placed.

**addons/main/$PBOPREFIX$**

```txt
z\tut\addons\main
```

It should almost always follow the format `{mainprefix}\{prefix}\addons\{addon}`. The `mainprefix` can be used by a group of your mods. If you are making a standalone mod, it is typically `z`.

**Example**

```txt
my_name\my_mod_1\addons\main
my_name\my_mod_2\addons\main
```

### script_version.hpp

Next, we will create a `script_version.hpp` file. This file is used to define the version of the addon.

**addons/main/script_version.hpp**

```cpp
#define MAJOR 0
#define MINOR 1
#define PATCH 0
#define BUILD 0
```

This sets our mod's version to `0.1.0.0` (major.minor.patch.build).

The build is optional, and can be omitted to shorten the version number to `0.1.0`.

### script_mod.hpp

Next, we will create a `script_mod.hpp` file. This file is used to define shared values for the mod.

**addons/main/script_mod.hpp**

```cpp
// COMPONENT should be defined in the script_component.hpp and included BEFORE this hpp

#define MAINPREFIX z
#define PREFIX tut
#define SUBPREFIX addons

#include "script_version.hpp"

// MINIMAL required version for the Mod. Components can specify others..
#define REQUIRED_VERSION 2.00

#ifdef COMPONENT_BEAUTIFIED
    #define COMPONENT_NAME QUOTE(Tutorial - COMPONENT_BEAUTIFIED)
#else
    #define COMPONENT_NAME QUOTE(Tutorial - COMPONENT)
#endif
```

### script_component.hpp

A script component file is used to define the current addon for use within itself. It allows us to write generic code that can be transferred between addons without requiring many changes.

**addons/main/script_component.hpp**

```cpp
#define COMPONENT main
#define COMPONENT_BEAUTIFIED Main
#include "script_mod.hpp"

#include "script_macros.hpp"
```

### config.cpp

Next, we will create a `config.cpp` file. This file is used to declare the addon, and define its dependencies.

**addons/main/config.cpp**

```cpp
#include "script_component.hpp"

class CfgPatches {
    class ADDON {
        name = QUOTE(COMPONENT);
        units[] = {};
        weapons[] = {};
        requiredVersion = REQUIRED_VERSION;
        requiredAddons[] = {"tut_common"};
        author = "Me";
        authors[] = {"Me"};
        VERSION_CONFIG;
    };
};
```

Let's break that down.

```cpp
#include "script_component.hpp"
```

This line includes the `script_component.hpp` file. The script component file is used by configs and scripts to access shared macros and values. It will be covered in more detail later.

```cpp
class CfgPatches {
    class ADDON {
        name = QUOTE(COMPONENT);
        units[] = {};
        weapons[] = {};
        requiredVersion = REQUIRED_VERSION;
        requiredAddons[] = {"tut_common"};
        author = "Me";
        authors[] = {"Me"};
        VERSION_CONFIG;
    };
};
```
