---
source: libs/sqf/tests/optimizer.rs
expression: optimize(stringify! (consume_array))
---
Statements {
    content: [
        Expression(
            UnaryCommand(
                Named(
                    "params",
                ),
                ConsumeableArray(
                    [
                        String(
                            "_a",
                            8..12,
                            DoubleQuote,
                        ),
                        String(
                            "_b",
                            14..18,
                            DoubleQuote,
                        ),
                    ],
                    8..18,
                ),
                0..6,
            ),
            0..19,
        ),
        Expression(
            UnaryCommand(
                Named(
                    "params",
                ),
                UnaryCommand(
                    Plus,
                    ConsumeableArray(
                        [
                            String(
                                "_a",
                                30..34,
                                DoubleQuote,
                            ),
                            String(
                                "_b",
                                36..40,
                                DoubleQuote,
                            ),
                            Array(
                                [
                                    String(
                                        "_c",
                                        43..47,
                                        DoubleQuote,
                                    ),
                                    Array(
                                        [],
                                        50..51,
                                    ),
                                ],
                                43..51,
                            ),
                        ],
                        30..52,
                    ),
                    30..52,
                ),
                22..28,
            ),
            22..53,
        ),
        Expression(
            BinaryCommand(
                Named(
                    "getVariable",
                ),
                NularCommand(
                    NularCommand {
                        name: "missionNamespace",
                    },
                    56..72,
                ),
                ConsumeableArray(
                    [
                        String(
                            "a",
                            86..89,
                            DoubleQuote,
                        ),
                        Number(
                            FloatOrd(
                                -1.0,
                            ),
                            91..92,
                        ),
                    ],
                    86..93,
                ),
                73..84,
            ),
            56..94,
        ),
        Expression(
            BinaryCommand(
                Named(
                    "setVariable",
                ),
                Variable(
                    "z",
                    97..98,
                ),
                UnaryCommand(
                    Plus,
                    ConsumeableArray(
                        [
                            String(
                                "b",
                                112..115,
                                DoubleQuote,
                            ),
                            Array(
                                [],
                                118..119,
                            ),
                            Boolean(
                                true,
                                121..125,
                            ),
                        ],
                        112..125,
                    ),
                    112..125,
                ),
                99..110,
            ),
            97..126,
        ),
        Expression(
            BinaryCommand(
                Named(
                    "vectorAdd",
                ),
                ConsumeableArray(
                    [
                        Number(
                            FloatOrd(
                                1.0,
                            ),
                            130..131,
                        ),
                        Number(
                            FloatOrd(
                                0.0,
                            ),
                            132..133,
                        ),
                    ],
                    130..133,
                ),
                Variable(
                    "p",
                    145..146,
                ),
                135..144,
            ),
            129..146,
        ),
        Expression(
            UnaryCommand(
                Named(
                    "positionCameraToWorld",
                ),
                ConsumeableArray(
                    [
                        Number(
                            FloatOrd(
                                10000.0,
                            ),
                            172..177,
                        ),
                        Number(
                            FloatOrd(
                                0.0,
                            ),
                            179..180,
                        ),
                        Number(
                            FloatOrd(
                                10000.0,
                            ),
                            182..187,
                        ),
                    ],
                    172..187,
                ),
                149..170,
            ),
            149..188,
        ),
        Expression(
            UnaryCommand(
                Named(
                    "random",
                ),
                Array(
                    [
                        Number(
                            FloatOrd(
                                0.0,
                            ),
                            200..201,
                        ),
                        Variable(
                            "_x",
                            203..205,
                        ),
                        Number(
                            FloatOrd(
                                1.0,
                            ),
                            207..208,
                        ),
                    ],
                    200..208,
                ),
                192..198,
            ),
            192..209,
        ),
        AssignLocal(
            "_z",
            BinaryCommand(
                Named(
                    "then",
                ),
                UnaryCommand(
                    Named(
                        "if",
                    ),
                    BinaryCommand(
                        Greater,
                        NularCommand(
                            NularCommand {
                                name: "time",
                            },
                            229..233,
                        ),
                        Number(
                            FloatOrd(
                                10.0,
                            ),
                            236..238,
                        ),
                        234..235,
                    ),
                    225..227,
                ),
                ConsumeableArray(
                    [
                        Code(
                            Statements {
                                content: [
                                    Expression(
                                        Number(
                                            FloatOrd(
                                                1.0,
                                            ),
                                            247..248,
                                        ),
                                        247..248,
                                    ),
                                    Expression(
                                        Number(
                                            FloatOrd(
                                                2.0,
                                            ),
                                            249..250,
                                        ),
                                        249..250,
                                    ),
                                    Expression(
                                        Number(
                                            FloatOrd(
                                                3.0,
                                            ),
                                            251..252,
                                        ),
                                        251..252,
                                    ),
                                    Expression(
                                        Number(
                                            FloatOrd(
                                                4.0,
                                            ),
                                            253..254,
                                        ),
                                        253..254,
                                    ),
                                ],
                                source: "1;2;3;4;",
                                span: 247..255,
                            },
                        ),
                        Code(
                            Statements {
                                content: [
                                    Expression(
                                        Number(
                                            FloatOrd(
                                                -1.0,
                                            ),
                                            265..266,
                                        ),
                                        265..267,
                                    ),
                                    Expression(
                                        Number(
                                            FloatOrd(
                                                -2.0,
                                            ),
                                            268..269,
                                        ),
                                        268..270,
                                    ),
                                ],
                                source: "-1;-2;",
                                span: 265..271,
                            },
                        ),
                    ],
                    258..262,
                ),
                240..244,
            ),
            212..273,
        ),
        Expression(
            UnaryCommand(
                Named(
                    "param",
                ),
                ConsumeableArray(
                    [
                        String(
                            "_d",
                            283..287,
                            DoubleQuote,
                        ),
                    ],
                    283..287,
                ),
                276..281,
            ),
            276..288,
        ),
        Expression(
            BinaryCommand(
                Named(
                    "param",
                ),
                Array(
                    [],
                    292..293,
                ),
                ConsumeableArray(
                    [
                        String(
                            "_e",
                            301..305,
                            DoubleQuote,
                        ),
                    ],
                    301..305,
                ),
                294..299,
            ),
            291..306,
        ),
    ],
    source: "params [\"_a\", \"_b\"];\n\nparams [\"_a\", \"_b\", [\"_c\", []]];\n\nmissionNamespace getVariable [\"a\", -1];\n\nz setVariable [\"b\", [], true];\n\n[1,0] vectorAdd p;\n\npositionCameraToWorld [10000, 0, 10000];\n\n\nrandom [0, _x, 1];\n\nprivate _z = if (time > 10) then { 1;2;3;4; } else { -1;-2; };\n\nparam [\"_d\"];\n\n[] param [\"_e\"];\n",
    span: 0..307,
}
